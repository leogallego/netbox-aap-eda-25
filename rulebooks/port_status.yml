---
- name: Port State Event from Arista

  hosts: all
  sources:
   - ansible.eda.kafka:
       host: broker
       port: 9092
       topic: eda-topic

  rules:
   - name: Port is down
     condition: event.fields.admin_status == "DOWN"
     action:
       run_job_template:
        organization: "Default"
        name: "Desired port status"
